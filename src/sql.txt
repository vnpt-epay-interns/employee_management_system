
create table users (
	id int primary key auto_increment,
	first_name varchar(255), 
    last_name varchar(255),
    email varchar(255),
    password varchar(255),
    role varchar(255),
    avatar varchar(3000),
    verification_code varchar(255),
    is_locked boolean default true
);
    
    
create table managers (
	id int primary key auto_increment,
    referenced_code varchar(255),
    foreign key (id) references users(id) 
    on delete cascade
);


create table employees (
	id int primary key auto_increment,
    manager_id int,
    foreign key (id) references users(id) on delete cascade,
    foreign key (manager_id) references managers(id)
);



create table working_schedules(
	id int primary key auto_increment,
    date date,
    at_morning boolean,
    at_afternoon boolean,
    employee_id int,
    foreign key (employee_id) references users(id)
    on delete cascade
);

create table projects(
	id int primary key auto_increment,
    name varchar(255),
    manager_id int not null,
    foreign key (manager_id) references managers(id)
    on delete cascade
);

create table tasks (
	id int primary key auto_increment,
    title varchar(255),
    description longtext,
    start_date date,
    end_date date,
    status varchar(25),
    priority varchar(25),
    completion int,
    estimate_hours float,
    employee_id int not null,
    parent_id int,
    project_id int,
    foreign key (employee_id) references employees(id) on delete cascade,
    foreign key (parent_id) references tasks(id),
    foreign key (project_id) references projects(id) on delete cascade
    );